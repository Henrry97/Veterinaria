<!DOCTYPE html>
<html lang="es">

<body>

  <header class="headerMensaje">

    <button type="button" class="btn btn-outline-info text-black" onclick="window.history.back();">
        Regresar
        <a href="/presentar_mascota" style="color: inherit; text-decoration: none;"></a>
      </button>
  </header>

  <main>

   <div class="container mt-5">
  <h1 class="text-center">Chat</h1>

  <div id="areaDeMensajes" class="border rounded p-3"
    style="height: 400px; overflow-y: scroll;background-color: #e5ddd5;background-size: cover;">
    {{#each mensajes}}
    <div class="mb-2" style="display:flex; flex-direction: column;padding: 10px;">
      <div class="card" data-id="{{id}}"
        style="display: flex;width: fit-content;max-width: 100%;margin-bottom: 0.75rem;{{#if esAdmin}}align-self: flex-end{{else}}align-self: flex-start;{{/if}}">
        <div class="card-body" style="padding: 0.5rem;">
          <h6 class="card-subtitle mb-2 text-muted">De: {{emisor}} - {{datos.hora}}</h6>
          <p class="card-text">{{datos.mensaje}}</p>
        </div>
      </div>
    </div>
    {{/each}}
  </div>

  <!-- Formulario para enviar mensajes -->
  <form id="formularioEnvio" class="d-flex mt-3" action="/mensajes/enviar" method="post">
    <input type="hidden" id="usuario" name="usuario" value="{{usuario}}">
    <input type="hidden" id="idUsuario" name="idUsuario" value="{{idUsuario}}">
    <input type="text" class="form-control me-2" id="textoMensaje" name="mensaje" placeholder="Escribe un mensaje...">
    <button type="submit" class="btn btn-primary">Enviar</button>
  </form>
</div>
<script>
  window.onload = function() {
    var areaDeMensajes = document.getElementById('areaDeMensajes');
    areaDeMensajes.scrollTop = areaDeMensajes.scrollHeight;
  };
</script>

    </section>
  </main>

  <footer>

    <h2 class="titu_fin"> &copy; Clinica Veterinaria Solvitec <br>Todos los Derechos Reservados</h2>

  </footer>



</body>





</html>